<!--
  Generated template for the ActaDigitalPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Acta Digital</ion-title>
  </ion-navbar>

</ion-header>
<ion-content padding no-bounce>
  <ion-grid>
    <ion-row>
      <ion-col>
        <h1 align="center">Acta Digital</h1>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Nombre Aviso:</strong></ion-col>
      <ion-col>{{dataMantenimiento.name}}</ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Número Aviso:</strong></ion-col>
      <ion-col>{{dataMantenimiento.sec}}</ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Cliente:</strong></ion-col>
      <ion-col>{{dataMantenimiento.partner_id[1]}}</ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Ciudad del Aviso:</strong></ion-col>
      <ion-col>{{dataMantenimiento.city_id}}</ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Código Oficina:</strong></ion-col>
      <ion-col>827</ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Nombre Oficina:</strong></ion-col>
      <ion-col>{{dataMantenimiento.branch_type}} {{dataMantenimiento.location_id}}</ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Falla Reportada:</strong></ion-col>
      <ion-col>{{dataMantenimiento.description}}</ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Trabajo Realizado sobre:</strong></ion-col>
      <ion-col>{{necesidad.name}}</ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Trabajo Realizado:</strong></ion-col>
      <ion-col>
        <p *ngFor="let ser of servicios">{{ser.name}}</p>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Repuestos y/o suministros Reparados:</strong></ion-col>
      <ion-col>
        <ion-row *ngFor="let prod of productos">
          <ion-col *ngIf="prod.accion == 1"><strong>Producto: </strong>{{prod.name}}</ion-col>
          <ion-col *ngIf="prod.accion == 1"><strong>Cantidad: </strong>{{prod.cantidad}}</ion-col>
        </ion-row>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Repuestos y/o suministros nuevos:</strong></ion-col>
      <ion-col>
        <ion-row *ngFor="let pro of productos">
          <ion-col *ngIf="pro.accion == 2"><strong>Producto: </strong>{{pro.name}}</ion-col>
          <ion-col *ngIf="pro.accion == 2"><strong>Cantidad: </strong>{{pro.cantidad}}</ion-col>
        </ion-row>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Observaciones del Técnico: </strong></ion-col>
      <ion-col>
        <ion-item>
          <ion-input type="text" value="" [(ngModel)]="observation_user"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col><strong>Nombre del Funcionario:</strong></ion-col>
      <ion-col>{{username}}</ion-col>
    </ion-row>
  </ion-grid>
  <ion-item>
    <ion-label floating>Identificación del Contacto</ion-label>
    <ion-input [(ngModel)]="functionary_vat"></ion-input>
  </ion-item>
  <ion-item>
    <ion-label floating>Nombre del Funcionario</ion-label>
    <ion-input [(ngModel)]="functionary_name"></ion-input>
  </ion-item>
  <ion-item>
    <ion-label floating>Email del Contacto</ion-label>
    <ion-input [(ngModel)]="functionary_email"></ion-input>
  </ion-item>
  <ion-grid #fixedContainer *ngIf="showCanvas">
    <ion-row>
      <ion-col>
        <canvas #imageCanvas (touchstart)="startDrawing($event)" (touchmove)="moved($event)"></canvas>
        <button ion-button color="primary" style="width: 48%;float: left;" (click)="saveCanvasImage()">Guardar Firma</button>
        <button ion-button color="danger" style="width: 48%;float: right;" (click)="clearCanvasImage()">Limpiar Firma</button>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-list *ngIf="firma">
    <ion-list-header>Firma del Responsable</ion-list-header>
    <ion-card>
      <ion-card-content>
        <img src="{{firma}}">
      </ion-card-content>
    </ion-card>
  </ion-list>
  <button ion-button color="secondary" full (click)="save_acta()">Finalizar Proceso</button>
</ion-content>
